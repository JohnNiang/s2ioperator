apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: (devel)
  creationTimestamp: null
  name: s2ibuilders.devops.kubesphere.io
spec:
  additionalPrinterColumns:
  - JSONPath: .status.runCount
    name: RunCount
    type: integer
  - JSONPath: .status.lastRunState
    name: LastRunState
    type: string
  - JSONPath: .status.lastRunName
    name: LastRunName
    type: string
  - JSONPath: .status.lastRunStartTime
    name: LastRunStartTime
    type: date
  group: devops.kubesphere.io
  names:
    kind: S2iBuilder
    listKind: S2iBuilderList
    plural: s2ibuilders
    shortNames:
    - s2ib
    singular: s2ibuilder
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: S2iBuilder is the Schema for the s2ibuilders API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: S2iBuilderSpec defines the desired state of S2iBuilder
          properties:
            config:
              description: 'INSERT ADDITIONAL SPEC FIELDS - desired state of cluster
                Important: Run "make" to regenerate code after modifying this file'
              properties:
                addHost:
                  description: AddHost Add a line to /etc/hosts for test purpose or
                    private use in LAN. Its format is host:IP,muliple hosts can be
                    added  by using multiple --add-host
                  items:
                    type: string
                  type: array
                asDockerfile:
                  description: AsDockerfile indicates the path where the Dockerfile
                    should be written instead of building a new image.
                  type: string
                assembleUser:
                  description: AssembleUser specifies the user to run the assemble
                    script in container
                  type: string
                blockOnBuild:
                  description: BlockOnBuild prevents s2i from performing a docker
                    build operation if one is necessary to execute ONBUILD commands,
                    or to layer source code into the container for images that don't
                    have a tar binary available, if the image contains ONBUILD commands
                    that would be executed.
                  type: boolean
                branchExpression:
                  description: Regular expressions, ignoring names that do not match
                    the provided regular expression
                  type: string
                buildVolumes:
                  description: BuildVolumes specifies a list of volumes to mount to
                    container running the build.
                  items:
                    type: string
                  type: array
                builderBaseImageVersion:
                  description: BuilderBaseImageVersion provides optional version information
                    about the builder base image.
                  type: string
                builderImage:
                  description: BuilderImage describes which image is used for building
                    the result images.
                  type: string
                builderImageVersion:
                  description: BuilderImageVersion provides optional version information
                    about the builder image.
                  type: string
                builderPullPolicy:
                  description: BuilderPullPolicy specifies when to pull the builder
                    image
                  type: string
                callbackUrl:
                  description: CallbackURL is a URL which is called upon successful
                    build to inform about that fact.
                  type: string
                cgroupLimits:
                  description: CGroupLimits describes the cgroups limits that will
                    be applied to any containers run by s2i.
                  properties:
                    cpuPeriod:
                      format: int64
                      type: integer
                    cpuQuota:
                      format: int64
                      type: integer
                    cpuShares:
                      format: int64
                      type: integer
                    memoryLimitBytes:
                      format: int64
                      type: integer
                    memorySwap:
                      format: int64
                      type: integer
                    parent:
                      type: string
                  required:
                  - cpuPeriod
                  - cpuQuota
                  - cpuShares
                  - memoryLimitBytes
                  - memorySwap
                  - parent
                  type: object
                contextDir:
                  description: Specify a relative directory inside the application
                    repository that should be used as a root directory for the application.
                  type: string
                description:
                  description: Description is a result image description label. The
                    default is no description.
                  type: string
                destination:
                  description: Destination specifies a location where the untar operation
                    will place its artifacts.
                  type: string
                displayName:
                  description: DisplayName is a result image display-name label. This
                    defaults to the output image name.
                  type: string
                dockerConfig:
                  description: DockerConfig describes how to access host docker daemon.
                  properties:
                    caFile:
                      description: CAFile is the certificate authority file path for
                        a TLS connection
                      type: string
                    certFile:
                      description: CertFile is the certificate file path for a TLS
                        connection
                      type: string
                    endPoint:
                      description: Endpoint is the docker network endpoint or socket
                      type: string
                    keyFile:
                      description: KeyFile is the key file path for a TLS connection
                      type: string
                    tlsVerify:
                      description: TLSVerify indicates if TLS peer must be verified
                      type: boolean
                    useTLS:
                      description: UseTLS indicates if TLS must be used
                      type: boolean
                  required:
                  - caFile
                  - certFile
                  - endPoint
                  - keyFile
                  - tlsVerify
                  - useTLS
                  type: object
                dockerNetworkMode:
                  description: DockerNetworkMode is used to set the docker network
                    setting to --net=container:<id> when the builder is invoked from
                    a container.
                  type: string
                dropCapabilities:
                  description: DropCapabilities contains a list of capabilities to
                    drop when executing containers
                  items:
                    type: string
                  type: array
                environment:
                  description: Environment is a map of environment variables to be
                    passed to the image.
                  items:
                    description: EnvironmentSpec specifies a single environment variable.
                    properties:
                      name:
                        type: string
                      value:
                        type: string
                    required:
                    - name
                    - value
                    type: object
                  type: array
                excludeRegExp:
                  description: ExcludeRegExp contains a string representation of the
                    regular expression desired for deciding which files to exclude
                    from the tar stream
                  type: string
                export:
                  description: Export Push the result image to specify image registry
                    in tag
                  type: boolean
                gitSecretRef:
                  description: GitSecretRef is the BasicAuth Secret of Git Clone
                  properties:
                    name:
                      description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        TODO: Add other useful fields. apiVersion, kind, uid?'
                      type: string
                  type: object
                hasOnBuild:
                  description: HasOnBuild will be set to true if the builder image
                    contains ONBUILD instructions
                  type: boolean
                imageName:
                  description: ImageName Contains the registry address and reponame,
                    tag should set by field tag alone
                  type: string
                imageScriptsUrl:
                  description: ImageScriptsURL is the default location to find the
                    assemble/run scripts for a builder image. This url can be a reference
                    within the builder image if the scheme is specified as image://
                  type: string
                imageWorkDir:
                  description: ImageWorkDir is the default working directory for the
                    builder image.
                  type: string
                incremental:
                  description: Incremental describes whether to try to perform incremental
                    build.
                  type: boolean
                incrementalAuthentication:
                  description: IncrementalAuthentication holds the authentication
                    information for pulling the previous image from private repositories
                  properties:
                    email:
                      type: string
                    password:
                      type: string
                    secretRef:
                      description: LocalObjectReference contains enough information
                        to let you locate the referenced object inside the same namespace.
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                    serverAddress:
                      type: string
                    username:
                      type: string
                  type: object
                incrementalFromTag:
                  description: IncrementalFromTag sets an alternative image tag to
                    look for existing artifacts. Tag is used by default if this is
                    not set.
                  type: string
                injections:
                  description: Injections specifies a list source/destination folders
                    that are injected to the container that runs assemble. All files
                    we inject will be truncated after the assemble script finishes.
                  items:
                    description: VolumeSpec represents a single volume mount point.
                    properties:
                      destination:
                        description: Destination is the path to mount the volume to
                          - absolute or relative.
                        type: string
                      keep:
                        description: Keep indicates if the mounted data should be
                          kept in the final image.
                        type: boolean
                      source:
                        description: Source is a reference to the volume source.
                        type: string
                    type: object
                  type: array
                isBinaryURL:
                  description: IsBinaryURL explain the type of SourceURL. If it is
                    IsBinaryURL, it will download the file directly without using
                    git.
                  type: boolean
                keepSymlinks:
                  description: KeepSymlinks indicates to copy symlinks as symlinks.
                    Default behavior is to follow symlinks and copy files by content.
                  type: boolean
                labelNamespace:
                  description: LabelNamespace provides the namespace under which the
                    labels will be generated.
                  type: string
                labels:
                  additionalProperties:
                    type: string
                  description: Labels specify labels and their values to be applied
                    to the resulting image. Label keys must have non-zero length.
                    The labels defined here override generated labels in case they
                    have the same name.
                  type: object
                layeredBuild:
                  description: LayeredBuild describes if this is build which layered
                    scripts and sources on top of BuilderImage.
                  type: boolean
                nodeAffinityKey:
                  description: The key of Node Affinity.
                  type: string
                nodeAffinityValues:
                  description: The values of Node Affinity.
                  items:
                    type: string
                  type: array
                outputBuildResult:
                  description: Whether output build result to status.
                  type: boolean
                outputImageName:
                  description: OutputImageName is a result image name without tag,
                    default is latest. tag will append to ImageName in the end
                  type: string
                preserveWorkingDir:
                  description: PreserveWorkingDir describes if working directory should
                    be left after processing.
                  type: boolean
                previousImagePullPolicy:
                  description: PreviousImagePullPolicy specifies when to pull the
                    previously build image when doing incremental build
                  type: string
                pullAuthentication:
                  description: PullAuthentication holds the authentication information
                    for pulling the Docker images from private repositories
                  properties:
                    email:
                      type: string
                    password:
                      type: string
                    secretRef:
                      description: LocalObjectReference contains enough information
                        to let you locate the referenced object inside the same namespace.
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                    serverAddress:
                      type: string
                    username:
                      type: string
                  type: object
                pushAuthentication:
                  description: PullAuthentication holds the authentication information
                    for pulling the Docker images from private repositories
                  properties:
                    email:
                      type: string
                    password:
                      type: string
                    secretRef:
                      description: LocalObjectReference contains enough information
                        to let you locate the referenced object inside the same namespace.
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                    serverAddress:
                      type: string
                    username:
                      type: string
                  type: object
                removePreviousImage:
                  description: RemovePreviousImage describes if previous image should
                    be removed after successful build. This applies only to incremental
                    builds.
                  type: boolean
                revisionId:
                  description: The RevisionId is a branch name or a SHA-1 hash of
                    every important thing about the commit
                  type: string
                runImage:
                  description: RunImage will trigger a "docker run ..." invocation
                    of the produced image so the user can see if it operates as he
                    would expect
                  type: boolean
                runtimeArtifacts:
                  description: RuntimeArtifacts specifies a list of source/destination
                    pairs that will be copied from builder to a runtime image. Source
                    can be a file or directory. Destination must be a directory. Regardless
                    whether it is an absolute or relative path, it will be placed
                    into image's WORKDIR. Destination also can be empty or equals
                    to ".", in this case it just refers to a root of WORKDIR. In case
                    it's empty, S2I will try to get this list from io.openshift.s2i.assemble-input-files
                    label on a RuntimeImage.
                  items:
                    description: VolumeSpec represents a single volume mount point.
                    properties:
                      destination:
                        description: Destination is the path to mount the volume to
                          - absolute or relative.
                        type: string
                      keep:
                        description: Keep indicates if the mounted data should be
                          kept in the final image.
                        type: boolean
                      source:
                        description: Source is a reference to the volume source.
                        type: string
                    type: object
                  type: array
                runtimeAuthentication:
                  description: RuntimeAuthentication holds the authentication information
                    for pulling the runtime Docker images from private repositories.
                  properties:
                    email:
                      type: string
                    password:
                      type: string
                    secretRef:
                      description: LocalObjectReference contains enough information
                        to let you locate the referenced object inside the same namespace.
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                    serverAddress:
                      type: string
                    username:
                      type: string
                  type: object
                runtimeImage:
                  description: RuntimeImage specifies the image that will be a base
                    for resulting image and will be used for running an application.
                    By default, BuilderImage is used for building and running, but
                    the latter may be overridden.
                  type: string
                runtimeImagePullPolicy:
                  description: RuntimeImagePullPolicy specifies when to pull a runtime
                    image.
                  type: string
                scriptDownloadProxyConfig:
                  description: ScriptDownloadProxyConfig optionally specifies the
                    http and https proxy to use when downloading scripts
                  properties:
                    httpProxy:
                      type: string
                    httpsProxy:
                      type: string
                  type: object
                scriptsUrl:
                  description: ScriptsURL is a URL describing where to fetch the S2I
                    scripts from during build process. This url can be a reference
                    within the builder image if the scheme is specified as image://
                  type: string
                secretCode:
                  description: SecretCode
                  type: string
                securityOpt:
                  description: SecurityOpt are passed as options to the docker containers
                    launched by s2i.
                  items:
                    type: string
                  type: array
                sourceUrl:
                  description: SourceURL is  url of the codes such as https://github.com/a/b.git
                  type: string
                tag:
                  description: Tag is a result image tag name.
                  type: string
                taintKey:
                  description: The name of taint.
                  type: string
                usage:
                  description: Usage allows for properly shortcircuiting s2i logic
                    when `s2i usage` is invoked
                  type: boolean
                workingDir:
                  description: WorkingDir describes temporary directory used for downloading
                    sources, scripts and tar operations.
                  type: string
                workingSourceDir:
                  description: WorkingSourceDir describes the subdirectory off of
                    WorkingDir set up during the repo download that is later used
                    as the root for ignore processing
                  type: string
              required:
              - imageName
              - sourceUrl
              type: object
            fromTemplate:
              description: FromTemplate define some inputs from user
              properties:
                builderImage:
                  description: BaseImage specify which version of this template to
                    use
                  type: string
                name:
                  description: Name specify a template to use, so many fields in Config
                    can left empty
                  type: string
                parameters:
                  description: Parameters must use with `template`, fill some parameters
                    which template will use
                  items:
                    properties:
                      defaultValue:
                        type: string
                      description:
                        type: string
                      key:
                        type: string
                      optValues:
                        items:
                          type: string
                        type: array
                      required:
                        type: boolean
                      type:
                        type: string
                      value:
                        type: string
                    type: object
                  type: array
              type: object
          type: object
        status:
          description: S2iBuilderStatus defines the observed state of S2iBuilder
          properties:
            lastRunName:
              description: LastRunState return the name of the newest run of this
                builder
              type: string
            lastRunStartTime:
              description: LastRunStartTime return the startTime of the newest run
                of this builder
              format: date-time
              type: string
            lastRunState:
              description: LastRunState return the state of the newest run of this
                builder
              type: string
            runCount:
              description: RunCount represent the sum of s2irun of this builder
              type: integer
          required:
          - runCount
          type: object
      type: object
  version: v1alpha1
  versions:
  - name: v1alpha1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: (devel)
  creationTimestamp: null
  name: s2ibuildertemplates.devops.kubesphere.io
spec:
  additionalPrinterColumns:
  - JSONPath: .spec.codeFramework
    name: Framework
    type: string
  - JSONPath: .spec.defaultBaseImage
    name: DefaultBaseImage
    type: string
  - JSONPath: .spec.version
    name: Version
    type: string
  group: devops.kubesphere.io
  names:
    categories:
    - devops
    kind: S2iBuilderTemplate
    listKind: S2iBuilderTemplateList
    plural: s2ibuildertemplates
    shortNames:
    - s2ibt
    singular: s2ibuildertemplate
  scope: Cluster
  subresources: {}
  validation:
    openAPIV3Schema:
      description: S2iBuilderTemplate is the Schema for the s2ibuildertemplates API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: S2iBuilderTemplateSpec defines the desired state of S2iBuilderTemplate
          properties:
            codeFramework:
              description: CodeFramework means which language this template is designed
                for and which framework is using if has framework. Like Java, NodeJS
                etc
              type: string
            containerInfo:
              description: ContainerInfo are the images this template will use.
              items:
                properties:
                  buildVolumes:
                    description: BuildVolumes specifies a list of volumes to mount
                      to container running the build.
                    items:
                      type: string
                    type: array
                  builderImage:
                    description: BuilderImage are the images this template will use.
                    type: string
                  runtimeArtifacts:
                    items:
                      description: VolumeSpec represents a single volume mount point.
                      properties:
                        destination:
                          description: Destination is the path to mount the volume
                            to - absolute or relative.
                          type: string
                        keep:
                          description: Keep indicates if the mounted data should be
                            kept in the final image.
                          type: boolean
                        source:
                          description: Source is a reference to the volume source.
                          type: string
                      type: object
                    type: array
                  runtimeImage:
                    type: string
                type: object
              type: array
            defaultBaseImage:
              description: DefaultBaseImage is the image that will be used by default
              type: string
            description:
              description: Description illustrate the purpose of this template
              type: string
            environment:
              description: Parameters is a set of environment variables to be passed
                to the image.
              items:
                properties:
                  defaultValue:
                    type: string
                  description:
                    type: string
                  key:
                    type: string
                  optValues:
                    items:
                      type: string
                    type: array
                  required:
                    type: boolean
                  type:
                    type: string
                  value:
                    type: string
                type: object
              type: array
            iconPath:
              description: IconPath is used for frontend display
              type: string
            version:
              description: Version of template
              type: string
          type: object
        status:
          description: S2iBuilderTemplateStatus defines the observed state of S2iBuilderTemplate
          type: object
      type: object
  version: v1alpha1
  versions:
  - name: v1alpha1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: (devel)
  creationTimestamp: null
  name: s2iruns.devops.kubesphere.io
spec:
  additionalPrinterColumns:
  - JSONPath: .status.runState
    name: State
    type: string
  - JSONPath: .status.kubernetesJobName
    name: K8sJobName
    type: string
  - JSONPath: .status.startTime
    name: StartTime
    type: date
  - JSONPath: .status.completionTime
    name: CompletionTime
    type: date
  - JSONPath: .status.s2iBuildResult.imageName
    name: ImageName
    type: string
  group: devops.kubesphere.io
  names:
    kind: S2iRun
    listKind: S2iRunList
    plural: s2iruns
    shortNames:
    - s2ir
    singular: s2irun
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: S2iRun is the Schema for the s2iruns API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: S2iRunSpec defines the desired state of S2iRun
          properties:
            backoffLimit:
              description: BackoffLimit limits the restart count of each s2irun. Default
                is 0
              format: int32
              type: integer
            builderName:
              description: BuilderName specify the name of s2ibuilder, required
              type: string
            newRevisionId:
              description: NewRevisionId override the default NewRevisionId in its
                s2ibuilder.
              type: string
            newSourceURL:
              description: NewSourceURL is used to download new binary artifacts
              type: string
            newTag:
              description: NewTag override the default tag in its s2ibuilder, image
                name cannot be changed.
              type: string
            secondsAfterFinished:
              description: SecondsAfterFinished if is set and greater than zero, and
                the job created by s2irun become successful or failed , the job will
                be auto deleted after SecondsAfterFinished
              format: int32
              type: integer
          required:
          - builderName
          type: object
        status:
          description: S2iRunStatus defines the observed state of S2iRun
          properties:
            completionTime:
              description: Represents time when the job was completed. It is not guaranteed
                to be set in happens-before order across separate operations. It is
                represented in RFC3339 form and is in UTC.
              format: date-time
              type: string
            kubernetesJobName:
              description: KubernetesJobName is the job name in k8s
              type: string
            logURL:
              description: LogURL is uesd for external log handler to let user know
                where is log located in
              type: string
            runState:
              description: RunState  indicates whether this job is done or failed
              type: string
            s2iBuildResult:
              description: S2i build result info.
              properties:
                commandPull:
                  description: Command for pull image.
                  type: string
                imageCreated:
                  description: Image created time.
                  type: string
                imageID:
                  description: Image ID.
                  type: string
                imageName:
                  description: ImageName is the name of artifact
                  type: string
                imageRepoTags:
                  description: image tags.
                  items:
                    type: string
                  type: array
                imageSize:
                  description: The size in bytes of the image
                  format: int64
                  type: integer
              type: object
            s2iBuildSource:
              description: S2i build source info.
              properties:
                binaryName:
                  description: Binary file Name
                  type: string
                binarySize:
                  description: Binary file Size
                  format: int64
                  type: integer
                builderImage:
                  description: // BuilderImage describes which image is used for building
                    the result images.
                  type: string
                commitID:
                  description: CommitID represents an arbitrary extended object reference
                    in Git as SHA-1
                  type: string
                committerEmail:
                  description: CommitterEmail contains the e-mail of the committer
                  type: string
                committerName:
                  description: CommitterName contains the name of the committer
                  type: string
                description:
                  description: Description is a result image description label. The
                    default is no description.
                  type: string
                revisionId:
                  description: The RevisionId is a branch name or a SHA-1 hash of
                    every important thing about the commit
                  type: string
                sourceUrl:
                  description: SourceURL is  url of the codes such as https://github.com/a/b.git
                  type: string
              type: object
            startTime:
              description: StartTime represent when this run began
              format: date-time
              type: string
          type: object
      type: object
  version: v1alpha1
  versions:
  - name: v1alpha1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
---
apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  creationTimestamp: null
  name: mutating-webhook-configuration
  namespace: kubesphere-devops-system
webhooks:
- clientConfig:
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURZekNDQWt1Z0F3SUJBZ0lKQU5zV3R0ZXdwb0FLTUEwR0NTcUdTSWIzRFFFQkN3VUFNRWd4Q3pBSkJnTlYKQkFZVEFrTk9NUXN3Q1FZRFZRUUlEQUpJUWpFTE1Ba0dBMVVFQ2d3Q1VVTXhIekFkQmdOVkJBTU1GbmRsWW1odgpiMnN0YzJWeWRtVnlMWE5sY25acFkyVXdIaGNOTWpBeE1UTXdNREkwTlRFNFdoY05ORGd3TkRFM01ESTBOVEU0CldqQklNUXN3Q1FZRFZRUUdFd0pEVGpFTE1Ba0dBMVVFQ0F3Q1NFSXhDekFKQmdOVkJBb01BbEZETVI4d0hRWUQKVlFRRERCWjNaV0pvYjI5ckxYTmxjblpsY2kxelpYSjJhV05sTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQwpBUThBTUlJQkNnS0NBUUVBeDZDb3l0UTRnbHlyZGRGUy9hSDZ2TU96SXpORHJQNDd6M2xkVVkyMXBGdzA4aUUyCmFTcGRqNHVHQkh6K2RSczdpaDd2eWo0aDZuMDdiaElUYkJTSzJPTHp1S0I5Y3hzRnJFRTNTVTdIVWh5SkxsengKRi9ic29CbWxIN3NRNkdsRzJ6dkFDMUJ0eVd4VmVlL0QrZlByQ01WZVRmNURMaHdZK2ZMM2M0STdNL3dkeU05bAo5MzBSVkJlNHNZOEkyYzNTdW1PNHlnVHlmTkNCL3crT1ZWOUpueDNkV2JqTkRVRU01azQzQjJURkxHcXMxS2pLCk1YemZSVDI4WTZyM2tNRTZwZHAzaHZ5REliZEY2WVJ0VmJ4ZzRQakphSWZVWkEyREZRWlIzeWFkQ1hnK0xiZE8KbmFKVUlZMzA4eUNxMzd4YzRMdkdzMGJ6S1I1UURqV2xXUktOSFFJREFRQUJvMUF3VGpBZEJnTlZIUTRFRmdRVQpkTU5VRFRsOSttYlhiUEtxdzYxUkJhK0w5c0l3SHdZRFZSMGpCQmd3Rm9BVWRNTlVEVGw5K21iWGJQS3F3NjFSCkJhK0w5c0l3REFZRFZSMFRCQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFSSHpiQkF3cmxWYzAKeDZsSTk0eG00KzRVZUw0UGlJeVB1SU9IMitXdFAySnBCODlpSkxxUUFDeE1VSVFnN1luN0l2VXJGUkhYckZoSQpVYm5ZWTFwaFdVUjRJNzNXbC9RRmR3aERqNmZxdUJwODhQTUw1UW1KK2VEdDg4TVdyRGJRYjEzbi9sZFNFNEVjClVJdUNYV3phYis0a1V4VkZPcVIzSkkxOG9FVVBkODlUMDVEUmw3MHZ1ZGdZdllZZUtEV0NkYTFMY2ZGR0trREEKSlJpcnZOalRNajdyZFM5RTdqd2FPNDVOUDNJZi8yOTVaSUh6OUxMWjYwREgwSjJ4Q1RwODAyaEw3SWY5VnVXLwo2YmZoNGRCTE9MVGJiNEtPTzR5NUFCMVJoUWJWQ0R2MGRWbW94VE5FQVlhbjFMWFZKdFZLOU9oWVVDckRYN2diClI1SG9IdTV4cnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    service:
      name: webhook-server-service
      namespace: kubesphere-devops-system
      path: /mutate-devops-kubesphere-io-v1alpha1-s2ibuilder
  failurePolicy: Fail
  name: s2ibuilder.kb.io
  rules:
  - apiGroups:
    - devops.kubesphere.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - s2ibuilders
---
apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  creationTimestamp: null
  name: validating-webhook-configuration
  namespace: kubesphere-devops-system
webhooks:
- clientConfig:
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURZekNDQWt1Z0F3SUJBZ0lKQU5zV3R0ZXdwb0FLTUEwR0NTcUdTSWIzRFFFQkN3VUFNRWd4Q3pBSkJnTlYKQkFZVEFrTk9NUXN3Q1FZRFZRUUlEQUpJUWpFTE1Ba0dBMVVFQ2d3Q1VVTXhIekFkQmdOVkJBTU1GbmRsWW1odgpiMnN0YzJWeWRtVnlMWE5sY25acFkyVXdIaGNOTWpBeE1UTXdNREkwTlRFNFdoY05ORGd3TkRFM01ESTBOVEU0CldqQklNUXN3Q1FZRFZRUUdFd0pEVGpFTE1Ba0dBMVVFQ0F3Q1NFSXhDekFKQmdOVkJBb01BbEZETVI4d0hRWUQKVlFRRERCWjNaV0pvYjI5ckxYTmxjblpsY2kxelpYSjJhV05sTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQwpBUThBTUlJQkNnS0NBUUVBeDZDb3l0UTRnbHlyZGRGUy9hSDZ2TU96SXpORHJQNDd6M2xkVVkyMXBGdzA4aUUyCmFTcGRqNHVHQkh6K2RSczdpaDd2eWo0aDZuMDdiaElUYkJTSzJPTHp1S0I5Y3hzRnJFRTNTVTdIVWh5SkxsengKRi9ic29CbWxIN3NRNkdsRzJ6dkFDMUJ0eVd4VmVlL0QrZlByQ01WZVRmNURMaHdZK2ZMM2M0STdNL3dkeU05bAo5MzBSVkJlNHNZOEkyYzNTdW1PNHlnVHlmTkNCL3crT1ZWOUpueDNkV2JqTkRVRU01azQzQjJURkxHcXMxS2pLCk1YemZSVDI4WTZyM2tNRTZwZHAzaHZ5REliZEY2WVJ0VmJ4ZzRQakphSWZVWkEyREZRWlIzeWFkQ1hnK0xiZE8KbmFKVUlZMzA4eUNxMzd4YzRMdkdzMGJ6S1I1UURqV2xXUktOSFFJREFRQUJvMUF3VGpBZEJnTlZIUTRFRmdRVQpkTU5VRFRsOSttYlhiUEtxdzYxUkJhK0w5c0l3SHdZRFZSMGpCQmd3Rm9BVWRNTlVEVGw5K21iWGJQS3F3NjFSCkJhK0w5c0l3REFZRFZSMFRCQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFSSHpiQkF3cmxWYzAKeDZsSTk0eG00KzRVZUw0UGlJeVB1SU9IMitXdFAySnBCODlpSkxxUUFDeE1VSVFnN1luN0l2VXJGUkhYckZoSQpVYm5ZWTFwaFdVUjRJNzNXbC9RRmR3aERqNmZxdUJwODhQTUw1UW1KK2VEdDg4TVdyRGJRYjEzbi9sZFNFNEVjClVJdUNYV3phYis0a1V4VkZPcVIzSkkxOG9FVVBkODlUMDVEUmw3MHZ1ZGdZdllZZUtEV0NkYTFMY2ZGR0trREEKSlJpcnZOalRNajdyZFM5RTdqd2FPNDVOUDNJZi8yOTVaSUh6OUxMWjYwREgwSjJ4Q1RwODAyaEw3SWY5VnVXLwo2YmZoNGRCTE9MVGJiNEtPTzR5NUFCMVJoUWJWQ0R2MGRWbW94VE5FQVlhbjFMWFZKdFZLOU9oWVVDckRYN2diClI1SG9IdTV4cnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    service:
      name: webhook-server-service
      namespace: kubesphere-devops-system
      path: /validate-devops-kubesphere-io-v1alpha1-s2ibuilder
  failurePolicy: Fail
  name: vs2ibuilder.kb.io
  rules:
  - apiGroups:
    - devops.kubesphere.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - s2ibuilders
- clientConfig:
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURZekNDQWt1Z0F3SUJBZ0lKQU5zV3R0ZXdwb0FLTUEwR0NTcUdTSWIzRFFFQkN3VUFNRWd4Q3pBSkJnTlYKQkFZVEFrTk9NUXN3Q1FZRFZRUUlEQUpJUWpFTE1Ba0dBMVVFQ2d3Q1VVTXhIekFkQmdOVkJBTU1GbmRsWW1odgpiMnN0YzJWeWRtVnlMWE5sY25acFkyVXdIaGNOTWpBeE1UTXdNREkwTlRFNFdoY05ORGd3TkRFM01ESTBOVEU0CldqQklNUXN3Q1FZRFZRUUdFd0pEVGpFTE1Ba0dBMVVFQ0F3Q1NFSXhDekFKQmdOVkJBb01BbEZETVI4d0hRWUQKVlFRRERCWjNaV0pvYjI5ckxYTmxjblpsY2kxelpYSjJhV05sTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQwpBUThBTUlJQkNnS0NBUUVBeDZDb3l0UTRnbHlyZGRGUy9hSDZ2TU96SXpORHJQNDd6M2xkVVkyMXBGdzA4aUUyCmFTcGRqNHVHQkh6K2RSczdpaDd2eWo0aDZuMDdiaElUYkJTSzJPTHp1S0I5Y3hzRnJFRTNTVTdIVWh5SkxsengKRi9ic29CbWxIN3NRNkdsRzJ6dkFDMUJ0eVd4VmVlL0QrZlByQ01WZVRmNURMaHdZK2ZMM2M0STdNL3dkeU05bAo5MzBSVkJlNHNZOEkyYzNTdW1PNHlnVHlmTkNCL3crT1ZWOUpueDNkV2JqTkRVRU01azQzQjJURkxHcXMxS2pLCk1YemZSVDI4WTZyM2tNRTZwZHAzaHZ5REliZEY2WVJ0VmJ4ZzRQakphSWZVWkEyREZRWlIzeWFkQ1hnK0xiZE8KbmFKVUlZMzA4eUNxMzd4YzRMdkdzMGJ6S1I1UURqV2xXUktOSFFJREFRQUJvMUF3VGpBZEJnTlZIUTRFRmdRVQpkTU5VRFRsOSttYlhiUEtxdzYxUkJhK0w5c0l3SHdZRFZSMGpCQmd3Rm9BVWRNTlVEVGw5K21iWGJQS3F3NjFSCkJhK0w5c0l3REFZRFZSMFRCQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFSSHpiQkF3cmxWYzAKeDZsSTk0eG00KzRVZUw0UGlJeVB1SU9IMitXdFAySnBCODlpSkxxUUFDeE1VSVFnN1luN0l2VXJGUkhYckZoSQpVYm5ZWTFwaFdVUjRJNzNXbC9RRmR3aERqNmZxdUJwODhQTUw1UW1KK2VEdDg4TVdyRGJRYjEzbi9sZFNFNEVjClVJdUNYV3phYis0a1V4VkZPcVIzSkkxOG9FVVBkODlUMDVEUmw3MHZ1ZGdZdllZZUtEV0NkYTFMY2ZGR0trREEKSlJpcnZOalRNajdyZFM5RTdqd2FPNDVOUDNJZi8yOTVaSUh6OUxMWjYwREgwSjJ4Q1RwODAyaEw3SWY5VnVXLwo2YmZoNGRCTE9MVGJiNEtPTzR5NUFCMVJoUWJWQ0R2MGRWbW94VE5FQVlhbjFMWFZKdFZLOU9oWVVDckRYN2diClI1SG9IdTV4cnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    service:
      name: webhook-server-service
      namespace: kubesphere-devops-system
      path: /validate-devops-kubesphere-io-v1alpha1-s2ibuildertemplate
  failurePolicy: Fail
  name: s2ibuildertemplate.kb.io
  rules:
  - apiGroups:
    - devops.kubesphere.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - s2ibuildertemplates
- clientConfig:
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURZekNDQWt1Z0F3SUJBZ0lKQU5zV3R0ZXdwb0FLTUEwR0NTcUdTSWIzRFFFQkN3VUFNRWd4Q3pBSkJnTlYKQkFZVEFrTk9NUXN3Q1FZRFZRUUlEQUpJUWpFTE1Ba0dBMVVFQ2d3Q1VVTXhIekFkQmdOVkJBTU1GbmRsWW1odgpiMnN0YzJWeWRtVnlMWE5sY25acFkyVXdIaGNOTWpBeE1UTXdNREkwTlRFNFdoY05ORGd3TkRFM01ESTBOVEU0CldqQklNUXN3Q1FZRFZRUUdFd0pEVGpFTE1Ba0dBMVVFQ0F3Q1NFSXhDekFKQmdOVkJBb01BbEZETVI4d0hRWUQKVlFRRERCWjNaV0pvYjI5ckxYTmxjblpsY2kxelpYSjJhV05sTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQwpBUThBTUlJQkNnS0NBUUVBeDZDb3l0UTRnbHlyZGRGUy9hSDZ2TU96SXpORHJQNDd6M2xkVVkyMXBGdzA4aUUyCmFTcGRqNHVHQkh6K2RSczdpaDd2eWo0aDZuMDdiaElUYkJTSzJPTHp1S0I5Y3hzRnJFRTNTVTdIVWh5SkxsengKRi9ic29CbWxIN3NRNkdsRzJ6dkFDMUJ0eVd4VmVlL0QrZlByQ01WZVRmNURMaHdZK2ZMM2M0STdNL3dkeU05bAo5MzBSVkJlNHNZOEkyYzNTdW1PNHlnVHlmTkNCL3crT1ZWOUpueDNkV2JqTkRVRU01azQzQjJURkxHcXMxS2pLCk1YemZSVDI4WTZyM2tNRTZwZHAzaHZ5REliZEY2WVJ0VmJ4ZzRQakphSWZVWkEyREZRWlIzeWFkQ1hnK0xiZE8KbmFKVUlZMzA4eUNxMzd4YzRMdkdzMGJ6S1I1UURqV2xXUktOSFFJREFRQUJvMUF3VGpBZEJnTlZIUTRFRmdRVQpkTU5VRFRsOSttYlhiUEtxdzYxUkJhK0w5c0l3SHdZRFZSMGpCQmd3Rm9BVWRNTlVEVGw5K21iWGJQS3F3NjFSCkJhK0w5c0l3REFZRFZSMFRCQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFSSHpiQkF3cmxWYzAKeDZsSTk0eG00KzRVZUw0UGlJeVB1SU9IMitXdFAySnBCODlpSkxxUUFDeE1VSVFnN1luN0l2VXJGUkhYckZoSQpVYm5ZWTFwaFdVUjRJNzNXbC9RRmR3aERqNmZxdUJwODhQTUw1UW1KK2VEdDg4TVdyRGJRYjEzbi9sZFNFNEVjClVJdUNYV3phYis0a1V4VkZPcVIzSkkxOG9FVVBkODlUMDVEUmw3MHZ1ZGdZdllZZUtEV0NkYTFMY2ZGR0trREEKSlJpcnZOalRNajdyZFM5RTdqd2FPNDVOUDNJZi8yOTVaSUh6OUxMWjYwREgwSjJ4Q1RwODAyaEw3SWY5VnVXLwo2YmZoNGRCTE9MVGJiNEtPTzR5NUFCMVJoUWJWQ0R2MGRWbW94VE5FQVlhbjFMWFZKdFZLOU9oWVVDckRYN2diClI1SG9IdTV4cnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    service:
      name: webhook-server-service
      namespace: kubesphere-devops-system
      path: /validate-devops-kubesphere-io-v1alpha1-s2irun
  failurePolicy: Fail
  name: vs2irun.kb.io
  rules:
  - apiGroups:
    - devops.kubesphere.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - s2iruns
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  creationTimestamp: null
  name: manager-role
rules:
- apiGroups:
  - devops.kubesphere.io
  resources:
  - s2ibuilders
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - devops.kubesphere.io
  resources:
  - s2ibuilders/status
  verbs:
  - get
  - update
  - patch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - devops.kubesphere.io
  resources:
  - s2iruns
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - devops.kubesphere.io
  resources:
  - s2iruns/status
  verbs:
  - get
  - update
  - patch
- apiGroups:
  - devops.kubesphere.io
  resources:
  - s2ibuildertemplates
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - get
  - list
  - watch
  - update
  - patch
- apiGroups:
  - apps
  resources:
  - statefulsets
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
- apiGroups:
  - extensions
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - serviceaccounts
  verbs:
  - get
  - list
  - watch
  - create
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - rolebindings
  verbs:
  - get
  - list
  - watch
  - create
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - roles
  verbs:
  - get
  - list
  - watch
  - create
- apiGroups:
  - ""
  resources:
  - namespaces
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  - validatingwebhookconfigurations
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: proxy-role
rules:
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  creationTimestamp: null
  name: manager-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: manager-role
subjects:
- kind: ServiceAccount
  name: default
  namespace: kubesphere-devops-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: proxy-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: proxy-role
subjects:
- kind: ServiceAccount
  name: default
  namespace: kubesphere-devops-system
---
apiVersion: v1
data:
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURZekNDQWt1Z0F3SUJBZ0lKQU5zV3R0ZXdwb0FLTUEwR0NTcUdTSWIzRFFFQkN3VUFNRWd4Q3pBSkJnTlYKQkFZVEFrTk9NUXN3Q1FZRFZRUUlEQUpJUWpFTE1Ba0dBMVVFQ2d3Q1VVTXhIekFkQmdOVkJBTU1GbmRsWW1odgpiMnN0YzJWeWRtVnlMWE5sY25acFkyVXdIaGNOTWpBeE1UTXdNREkwTlRFNFdoY05ORGd3TkRFM01ESTBOVEU0CldqQklNUXN3Q1FZRFZRUUdFd0pEVGpFTE1Ba0dBMVVFQ0F3Q1NFSXhDekFKQmdOVkJBb01BbEZETVI4d0hRWUQKVlFRRERCWjNaV0pvYjI5ckxYTmxjblpsY2kxelpYSjJhV05sTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQwpBUThBTUlJQkNnS0NBUUVBeDZDb3l0UTRnbHlyZGRGUy9hSDZ2TU96SXpORHJQNDd6M2xkVVkyMXBGdzA4aUUyCmFTcGRqNHVHQkh6K2RSczdpaDd2eWo0aDZuMDdiaElUYkJTSzJPTHp1S0I5Y3hzRnJFRTNTVTdIVWh5SkxsengKRi9ic29CbWxIN3NRNkdsRzJ6dkFDMUJ0eVd4VmVlL0QrZlByQ01WZVRmNURMaHdZK2ZMM2M0STdNL3dkeU05bAo5MzBSVkJlNHNZOEkyYzNTdW1PNHlnVHlmTkNCL3crT1ZWOUpueDNkV2JqTkRVRU01azQzQjJURkxHcXMxS2pLCk1YemZSVDI4WTZyM2tNRTZwZHAzaHZ5REliZEY2WVJ0VmJ4ZzRQakphSWZVWkEyREZRWlIzeWFkQ1hnK0xiZE8KbmFKVUlZMzA4eUNxMzd4YzRMdkdzMGJ6S1I1UURqV2xXUktOSFFJREFRQUJvMUF3VGpBZEJnTlZIUTRFRmdRVQpkTU5VRFRsOSttYlhiUEtxdzYxUkJhK0w5c0l3SHdZRFZSMGpCQmd3Rm9BVWRNTlVEVGw5K21iWGJQS3F3NjFSCkJhK0w5c0l3REFZRFZSMFRCQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFSSHpiQkF3cmxWYzAKeDZsSTk0eG00KzRVZUw0UGlJeVB1SU9IMitXdFAySnBCODlpSkxxUUFDeE1VSVFnN1luN0l2VXJGUkhYckZoSQpVYm5ZWTFwaFdVUjRJNzNXbC9RRmR3aERqNmZxdUJwODhQTUw1UW1KK2VEdDg4TVdyRGJRYjEzbi9sZFNFNEVjClVJdUNYV3phYis0a1V4VkZPcVIzSkkxOG9FVVBkODlUMDVEUmw3MHZ1ZGdZdllZZUtEV0NkYTFMY2ZGR0trREEKSlJpcnZOalRNajdyZFM5RTdqd2FPNDVOUDNJZi8yOTVaSUh6OUxMWjYwREgwSjJ4Q1RwODAyaEw3SWY5VnVXLwo2YmZoNGRCTE9MVGJiNEtPTzR5NUFCMVJoUWJWQ0R2MGRWbW94VE5FQVlhbjFMWFZKdFZLOU9oWVVDckRYN2diClI1SG9IdTV4cnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURLVENDQWhFQ0NRRHBnZUc4ak9PQlZUQU5CZ2txaGtpRzl3MEJBUXNGQURCSU1Rc3dDUVlEVlFRR0V3SkQKVGpFTE1Ba0dBMVVFQ0F3Q1NFSXhDekFKQmdOVkJBb01BbEZETVI4d0hRWURWUVFEREJaM1pXSm9iMjlyTFhObApjblpsY2kxelpYSjJhV05sTUI0WERUSXdNVEV6TURBeU5EVXhPRm9YRFRRNE1EUXhOekF5TkRVeE9Gb3daVEVMCk1Ba0dBMVVFQmhNQ1EwNHhDekFKQmdOVkJBZ01Ba2hDTVFzd0NRWURWUVFLREFKUlF6RThNRG9HQTFVRUF3d3oKZDJWaWFHOXZheTF6WlhKMlpYSXRjMlZ5ZG1salpTNXJkV0psYzNCb1pYSmxMV1JsZG05d2N5MXplWE4wWlcwdQpjM1pqTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF6cVMxTUNyYUxTOGlBaFRwClFiK2hnaGFoK3JmM1dNVE4vSXhnZVdxV3orTVMyNGxnWitVY1A3YmJxcGtTWHd1bWFCeXFGaUNVUkw1SVNLd1oKYjF6TjJtaUFPL09rbHlGZVFGeGFubGswbzQ5Nlp0cDM0Wm9YUWNmcnJSNml6RkdwWk5DZ283QSttSFV1d0VONwpDWXVoWVAxRTFnMVJrMmJQSHgrQlJjOGpENUJZSjV2YlRRc2RLTE5ITEgvTGdVREtySC9QVy9sZDdHR0pqNDN0CjdPdk5PTXBRaWNlOFNKM2ZBdkhCVmtWVVJ6ZldlZk15SytlSWxnM2I1UVhLQ0R5VGlERTd1ODU1RXJzc1UrRTEKbldLRWZQM1owWjJUc2hCa2FuV0RtakNnVWpjUkQxakdSVWxXekRrNlhUYW9GaFNrZWttakZtREQ4WDh1T0NQSApqSXhIK1FJREFRQUJNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUM3QmgwaUwyRmVNUzFoU1BEVVVXQUVDN2NpCnpYYklmRG8raDhBcjdmcTJUOVBCWlNLQjVKSnQwMWlyTlkvUzlkUjdJaHpmMlVtME5kZURnZnRwUzdmSEhzQm8KcVltZHZwOGdzMjl5TFF3U3hkdWNLWGhlZldMdjlKOGpMaHFrbDNrMkN6T3kvK2s4bW94UldoZlB4NTRpdkRLNgpsQVdCQ0NiTlpPU2xJb2FnbW5mNi9xVUFTUEd3Mk1iTXpIdnFJWjF4NzQwYVRmS2tMLzdpeTN6YjMrOWE0dlhqCk00MVBrRlVsYTRiNzBNT1ZwNXVNN0NXNGE5clhyekRTTVBvd0dpRXlGNUdFMVBHSTlMUnJ6VVoyYnhyVXdZR3YKbkFabTJtKzVrclNqdngrb0IwekNtYnFGRmgxVE5PUzh0dGJRUXhaNWVzbHhHTWx2Ti9PZnRwZ04vV0dSCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBenFTMU1DcmFMUzhpQWhUcFFiK2hnaGFoK3JmM1dNVE4vSXhnZVdxV3orTVMyNGxnClorVWNQN2JicXBrU1h3dW1hQnlxRmlDVVJMNUlTS3daYjF6TjJtaUFPL09rbHlGZVFGeGFubGswbzQ5Nlp0cDMKNFpvWFFjZnJyUjZpekZHcFpOQ2dvN0ErbUhVdXdFTjdDWXVoWVAxRTFnMVJrMmJQSHgrQlJjOGpENUJZSjV2YgpUUXNkS0xOSExIL0xnVURLckgvUFcvbGQ3R0dKajQzdDdPdk5PTXBRaWNlOFNKM2ZBdkhCVmtWVVJ6ZldlZk15CksrZUlsZzNiNVFYS0NEeVRpREU3dTg1NUVyc3NVK0UxbldLRWZQM1owWjJUc2hCa2FuV0RtakNnVWpjUkQxakcKUlVsV3pEazZYVGFvRmhTa2VrbWpGbUREOFg4dU9DUEhqSXhIK1FJREFRQUJBb0lCQUI0SWVFRUE2V2JKdytLVAprWGM1MThwbGFiTmJ5M28rV0VYTlRUUTRWcVR1TnM1cmYvUjVxd3BqbERlT09jcFFraVh0akpiY3MwL3VhK2tNCkFrSmFOWno1dFRHQmJybDhZd3R0b01vRTR3Nm1pcjZxSCtSTkZmWThqVGRERFp3dWZqVWwwVU1aR1cvbEVCOW4KYjFscXp0Q2Uzc05SZWpxM0pZRTdmZmxjYXBjWE81VDh3L3NvNE5kK3RXcC8yM0hCTUpRZGlyQjNZUlI5bXk2VQoxRDVsWWp4UGJTWHRlNG9NVzFJNDZvVFBYMWg1cHA1SUo3bVY1L1ViZkptc20yTnRYZDlYcW53cGxBWjg1czhSCm5IRmVZMCt3bCtsTW9obFQxejAzVk53WkVjdFpJeGVtQ1NSbENTYXR5U0xaelQ0eldlL0dYciszYkJXK3FxYW4KYkNxak9BVUNnWUVBOHAzdmloc0FjZU5DeThiaHNVenc5OEhPWGUxS2h5V2RsQXNOUmx2N0dZV2FWTmN5b0phZwpGRkR3elBTaCt3cHIzUk9QZWV4R2hIbm9KM0FPOUh4VXpCN3ZROUJhSDdTRjVvT2t6R1F2T2VKTC8vbExocHVPCjc2Uml2Rit1WXZvTmgrdXRxTzhZUHBVMGh4OVhlTy9DdVJmSUdrSy9LbVJGYU9jZmI3MnBtNDhDZ1lFQTJnckgKZHFMN0tVSkhyNGd6VXE2K3AzblZ1MWZJUCtUN3RjTGJKeVMrc2NYbkZOZzRQS0c3Mm51MDM3R1pXS1o1ejFBZAphUVh2U3dsN295dS9KT0tyZGEvbTQxMGROY0V5WEsrdFZUcE9qWTFKTFZxRjhIQS9sOWloT082Y2E1MWZGc2owCjBPTlE5S05PV04yRlRtRmFIUGdETXovSE80Rjh2Sm1PRnpIeFAvY0NnWUVBemlCZzQzVU5hN1VwaXZmdHlEVVcKaFdpamJDbXVxQ1BOUFhvbVRTRFl0VlpOU01lTXUrTTlIZ1dta0h0SEk0STNJaHo4U1JuMHo1akRKTDZQOWllcgo0OEJraDdqODJQTUcwRklJTVo3c2dNRkMwTGQ4ODJBMmtHT1pmM0hMTjB3N01yK0pTMzNYbTFRb3pLUlVMT3VICkJMcXZ4NS90eXBabVlqbjYrM1NvSlFFQ2dZQndmSE1ldjBJM3JOdnlzSjlabnBENU1aK1VBTnRzS3lPNFI0aHMKRDBiWnk3RkZUYTdsaU1LekduTGJuSEh5RENCM1ZXdDJ6UHNBaVNuaHFpWDRUNEFKUFBBdWg5RVQ5RkdaQTRDMgpvVmY1S3RSL3MxMjZCdzZudGJpbStHSjJHai8rTHpvdHNiZ0lIVi9EOUxSYkZWbzU2N0VxOVZKQlhySU5VbUs5CmtLUlhUUUtCZ0Jxa3ZDdVFCaWI4Y1piVjVHcTgzd0cyZzN2STJPOExCNTcvRDZIU2xhTmJNS1pLU3hWMEJ5L3QKZEJHZGFTajJLVmc5aG85YzJUR2M4SUxFVXhOaUgrZUdIcmtrSFJJb2luSTVsS3FCZ004OXFBR0UybnNURkhZOQpqZ05pK2NjYnZaYWY4UnRjR0NxYVk2M241NnA2K3VHZ2Jnbm5PakpEeUhWV3ljaVd2VVlMCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
kind: Secret
metadata:
  name: s2i-webhook-server-cert
  namespace: kubesphere-devops-system
type: Opaque
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    prometheus.io/port: "8080"
    prometheus.io/scheme: http
    prometheus.io/scrape: "true"
  labels:
    app: s2i-metrics
    control-plane: s2i-controller-manager
    controller-tools.k8s.io: "1.0"
  name: s2ioperator-metrics-service
  namespace: kubesphere-devops-system
spec:
  ports:
  - name: http
    port: 8080
    targetPort: 8080
  selector:
    control-plane: s2i-controller-manager
    controller-tools.k8s.io: "1.0"
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: s2i-trigger-service
    control-plane: s2i-controller-manager
    controller-tools.k8s.io: "1.0"
  name: s2ioperator-trigger-service
  namespace: kubesphere-devops-system
spec:
  ports:
  - name: http
    port: 8081
    targetPort: 8081
  selector:
    control-plane: s2i-controller-manager
    controller-tools.k8s.io: "1.0"
---
apiVersion: v1
kind: Service
metadata:
  name: webhook-server-service
  namespace: kubesphere-devops-system
spec:
  ports:
  - port: 443
    targetPort: 443
  selector:
    control-plane: s2i-controller-manager
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  labels:
    control-plane: s2ioperator
    controller-tools.k8s.io: "1.0"
  name: s2ioperator
  namespace: kubesphere-devops-system
spec:
  selector:
    matchLabels:
      control-plane: s2i-controller-manager
      controller-tools.k8s.io: "1.0"
  serviceName: s2ioperator
  template:
    metadata:
      annotations:
        prometheus.io/scrape: "true"
      labels:
        control-plane: s2i-controller-manager
        controller-tools.k8s.io: "1.0"
    spec:
      containers:
      - command:
        - /manager
        env:
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: S2IIMAGENAME
          value: kubespheredev/s2irun:latest
        image: kubespheredev/s2ioperator:latest
        imagePullPolicy: Always
        name: manager
        ports:
        - containerPort: 8080
          name: metrics
          protocol: TCP
        - containerPort: 8081
          name: trigger
          protocol: TCP
        resources:
          limits:
            cpu: 100m
            memory: 500Mi
          requests:
            cpu: 100m
            memory: 20Mi
        volumeMounts:
        - mountPath: /tmp/k8s-webhook-server/serving-certs
          name: cert
          readOnly: true
      terminationGracePeriodSeconds: 10
      volumes:
      - name: cert
        secret:
          defaultMode: 420
          secretName: s2i-webhook-server-cert
